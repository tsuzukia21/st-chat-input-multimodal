# Claude コマンド：コミット

このコマンドは、従来のコミットメッセージと絵文字を使用して、適切にフォーマットされたコミットを作成するのに役立ちます。

## 使用方法

コミットを作成するには、次のように入力します：
```
/commit
```

またはオプション付きで：
```
/commit --no-verify
```

## このコマンドの動作

1. `--no-verify` で指定されない限り、自動的にプリコミットチェックを実行します：
   - `pnpm lint` でコードの品質を確保
   - `pnpm build` でビルドが成功することを確認
   - `pnpm generate:docs` でドキュメントを更新
2. `git status` でステージされたファイルを確認
3. ステージされたファイルが0個の場合、`git add` で変更されたファイルと新しいファイルを自動的に追加
4. `git diff` を実行して、コミットされる変更内容を理解
5. 差分を分析して、複数の論理的に異なる変更が含まれているかを判定
6. 複数の異なる変更が検出された場合、コミットを複数の小さなコミットに分割することを提案
7. 各コミット（または分割されない場合は単一のコミット）に対して、絵文字の従来のコミット形式を使用してコミットメッセージを作成

## コミットのベストプラクティス

- **コミット前の確認**：コードがリント済み、正しくビルドされ、ドキュメントが更新されていることを確認
- **アトミックコミット**：各コミットは単一の目的に関連する変更のみを含む
- **大きな変更の分割**：変更が複数の関心事に触れる場合、別々のコミットに分割
- **従来のコミット形式**：`<type>: <説明>` の形式を使用し、typeは以下のいずれか：
  - `feat`：新機能
  - `fix`：バグ修正
  - `docs`：ドキュメントの変更
  - `style`：コードスタイルの変更（フォーマットなど）
  - `refactor`：バグ修正も新機能追加もしないコード変更
  - `perf`：パフォーマンス改善
  - `test`：テストの追加または修正
  - `chore`：ビルドプロセス、ツールなどの変更
- **現在時制、命令法**：コミットメッセージはコマンドとして書く（例："add feature"、"added feature"ではない）
- **簡潔な1行目**：1行目は72文字以下に保つ
- **絵文字**：各コミットタイプには適切な絵文字が組み合わされます：
  - ✨ `feat`：新機能
  - 🐛 `fix`：バグ修正
  - 📝 `docs`：ドキュメント
  - 💄 `style`：フォーマット/スタイル
  - ♻️ `refactor`：コードリファクタリング
  - ⚡️ `perf`：パフォーマンス改善
  - ✅ `test`：テスト
  - 🔧 `chore`：ツール、設定
  - 🚀 `ci`：CI/CD改善
  - 🗑️ `revert`：変更の取り消し
  - 🧪 `test`：失敗するテストを追加
  - 🚨 `fix`：コンパイラ/リンターの警告を修正
  - 🔒️ `fix`：セキュリティ問題を修正
  - 👥 `chore`：貢献者を追加または更新
  - 🚚 `refactor`：リソースの移動または名前変更
  - 🏗️ `refactor`：アーキテクチャの変更
  - 🔀 `chore`：ブランチのマージ
  - 📦️ `chore`：コンパイルファイルまたはパッケージの追加または更新
  - ➕ `chore`：依存関係を追加
  - ➖ `chore`：依存関係を削除
  - 🌱 `chore`：シードファイルを追加または更新
  - 🧑‍💻 `chore`：開発者体験を改善
  - 🧵 `feat`：マルチスレッドまたは並行性に関連するコードを追加または更新
  - 🔍️ `feat`：SEOを改善
  - 🏷️ `feat`：型を追加または更新
  - 💬 `feat`：テキストとリテラルを追加または更新
  - 🌐 `feat`：国際化とローカライゼーション
  - 👔 `feat`：ビジネスロジックを追加または更新
  - 📱 `feat`：レスポンシブデザインに関する作業
  - 🚸 `feat`：ユーザーエクスペリエンス/ユーザビリティを改善
  - 🩹 `fix`：重要でない問題の簡単な修正
  - 🥅 `fix`：エラーをキャッチ
  - 👽️ `fix`：外部APIの変更によるコード更新
  - 🔥 `fix`：コードまたはファイルを削除
  - 🎨 `style`：コードの構造/フォーマットを改善
  - 🚑️ `fix`：緊急修正
  - 🎉 `chore`：プロジェクトを開始
  - 🔖 `chore`：リリース/バージョンタグ
  - 🚧 `wip`：作業中
  - 💚 `fix`：CIビルドを修正
  - 📌 `chore`：依存関係を特定のバージョンに固定
  - 👷 `ci`：CIビルドシステムを追加または更新
  - 📈 `feat`：分析またはトラッキングコードを追加または更新
  - ✏️ `fix`：タイポを修正
  - ⏪️ `revert`：変更を取り消し
  - 📄 `chore`：ライセンスを追加または更新
  - 💥 `feat`：破壊的変更を導入
  - 🍱 `assets`：アセットを追加または更新
  - ♿️ `feat`：アクセシビリティを改善
  - 💡 `docs`：ソースコードにコメントを追加または更新
  - 🗃️ `db`：データベース関連の変更を実行
  - 🔊 `feat`：ログを追加または更新
  - 🔇 `fix`：ログを削除
  - 🤡 `test`：モックを作成
  - 🥚 `feat`：イースターエッグを追加または更新
  - 🙈 `chore`：.gitignoreファイルを追加または更新
  - 📸 `test`：スナップショットを追加または更新
  - ⚗️ `experiment`：実験を実行
  - 🚩 `feat`：機能フラグを追加、更新、または削除
  - 💫 `ui`：アニメーションとトランジションを追加または更新
  - ⚰️ `refactor`：デッドコードを削除
  - 🦺 `feat`：バリデーションに関連するコードを追加または更新
  - ✈️ `feat`：オフラインサポートを改善

## コミット分割のガイドライン

差分を分析する際、以下の基準に基づいてコミットの分割を検討してください：

1. **異なる関心事**：コードベースの無関係な部分への変更
2. **異なるタイプの変更**：機能、修正、リファクタリングなどの混合
3. **ファイルパターン**：異なるタイプのファイルへの変更（例：ソースコード vs ドキュメント）
4. **論理的グループ化**：別々に理解またはレビューしやすい変更
5. **サイズ**：分割するとより明確になる非常に大きな変更

## 例

良いコミットメッセージ：
- ✨ feat: ユーザー認証システムを追加
- 🐛 fix: レンダリングプロセスのメモリリークを解決
- 📝 docs: 新しいエンドポイントでAPIドキュメントを更新
- ♻️ refactor: パーサーのエラーハンドリングロジックを簡素化
- 🚨 fix: コンポーネントファイルのリンター警告を解決
- 🧑‍💻 chore: 開発者ツールセットアッププロセスを改善
- 👔 feat: トランザクション検証のビジネスロジックを実装
- 🩹 fix: ヘッダーの軽微なスタイルの不整合を修正
- 🚑️ fix: 認証フローの重要なセキュリティ脆弱性にパッチ適用
- 🎨 style: 読みやすさのためのコンポーネント構造を再編成
- 🔥 fix: 非推奨のレガシーコードを削除
- 🦺 feat: ユーザー登録フォームの入力検証を追加
- 💚 fix: 失敗するCIパイプラインテストを解決
- 📈 feat: ユーザーエンゲージメントの分析トラッキングを実装
- 🔒️ fix: 認証パスワード要件を強化
- ♿️ feat: スクリーンリーダーのフォームアクセシビリティを改善

コミット分割の例：
- 最初のコミット：✨ feat: 新しいsolcバージョンの型定義を追加
- 2番目のコミット：📝 docs: 新しいsolcバージョンのドキュメントを更新
- 3番目のコミット：🔧 chore: package.jsonの依存関係を更新
- 4番目のコミット：🏷️ feat: 新しいAPIエンドポイントの型定義を追加
- 5番目のコミット：🧵 feat: ワーカースレッドの並行性処理を改善
- 6番目のコミット：🚨 fix: 新しいコードのリンティング問題を解決
- 7番目のコミット：✅ test: 新しいsolcバージョン機能のユニットテストを追加
- 8番目のコミット：🔒️ fix: セキュリティ脆弱性のある依存関係を更新

## コマンドオプション

- `--no-verify`：プリコミットチェック（lint、build、generate:docs）をスキップ

## 重要な注意事項

- デフォルトでは、コードの品質を確保するためにプリコミットチェック（`pnpm lint`、`pnpm build`、`pnpm generate:docs`）が実行されます
- これらのチェックが失敗した場合、とにかくコミットを続行するか、まず問題を修正するかを尋ねられます
- 特定のファイルがすでにステージされている場合、コマンドはそれらのファイルのみをコミットします
- ステージされたファイルがない場合、変更されたファイルと新しいファイルをすべて自動的にステージします
- コミットメッセージは検出された変更に基づいて構築されます
- コミット前に、コマンドは差分をレビューして、複数のコミットがより適切かどうかを識別します
- 複数のコミットを提案する場合、変更を別々にステージしてコミットするのを手助けします
- コミット差分を常にレビューして、メッセージが変更と一致することを確認します